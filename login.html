<!DOCTYPE html>
<html lang="en">

<head>
	<title>OpenSVBRDF Login</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--===============================================================================================
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>-->
	<!--===============================================================================================-->
	<!--	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
===============================================================================================-->
	<!--	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
===============================================================================================-->
	<!--	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
===============================================================================================-->
	<!--	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
===============================================================================================-->
	<!--	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
===============================================================================================-->
	<!--	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
===============================================================================================-->
	<!--	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="./static/css/login_util.css">
	<link rel="stylesheet" type="text/css" href="./static/css/login_main.css">

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		function goCreateAccouont() {
			var table1 = document.getElementById("table_signup");
			var table2 = document.getElementById("table_createaccount");
			var table_forgotpassw = document.getElementById("table_forgotpassw");

			// 隐藏第一个表格
			table1.style.display = "none";
			table_forgotpassw.style.display = "none";

			// 显示第二个表格
			table2.style.display = "block";
		}

		function goSignIn() {
			var table1 = document.getElementById("table_signup");
			var table2 = document.getElementById("table_createaccount");
			var table_forgotpassw = document.getElementById("table_forgotpassw");

			table_forgotpassw.style.display = "none";
			table2.style.display = "none";
			table1.style.display = "block";
		}

		function goFP() {
			var table1 = document.getElementById("table_signup");
			var table2 = document.getElementById("table_createaccount");
			var table_forgotpassw = document.getElementById("table_forgotpassw");

			table1.style.display = "none";
			table2.style.display = "none";
			table_forgotpassw.style.display = "block";
		}

		function validateSignInForm() {
			var input1 = document.getElementById("signin1").value;
			var input2 = document.getElementById("signin2").value;
			var button = document.getElementById("SignInBtn");

			// 检查输入框的值
			if (input1 && input2) {
				// 启用按钮
				button.disabled = false;
			} else {
				// 禁用按钮
				button.disabled = true;
			}
		}

		function validateCAForm() {
			var input1 = document.getElementById("ca1").value;
			var input2 = document.getElementById("ca2").value;
			var button = document.getElementById("caBtn");

			// 检查输入框的值
			if (input1 && input2) {
				// 启用按钮
				button.disabled = false;
			} else {
				// 禁用按钮
				button.disabled = true;
			}
		}

		function validateFPForm() {
			var input1 = document.getElementById("fp_email").value;
			var button = document.getElementById("fpBtn");

			// 检查输入框的值
			if (input1) {
				// 启用按钮
				button.disabled = false;
			} else {
				// 禁用按钮
				button.disabled = true;
			}
		}


	</script>
</head>

<body>
	<!--<img src="{{ url_for('static', filename='img/bg1.png') }}" class="img-bg" referrerpolicy="no-referrer">-->

	<div class="limiter" id="table_signup" style="display:block;">
		<div class="container-login100">
			<div class="wrap-login100">
				<form id="form_signup" class="login100-form validate-form p-l-55 p-r-55 p-t-178">
					<span class="login100-form-title">
						Sign In
					</span>
					<input type="hidden" name="type" value="signin">
					<div class="wrap-input100 validate-input m-b-16" data-validate="Please enter e-mail">
						<input class="input100" type="text" name="email" placeholder="E-mail" id="signin1"
							oninput="validateSignInForm()">
						<span class="focus-input100"></span>
					</div>

					<div class="wrap-input100 validate-input" data-validate="Please enter password">
						<input class="input100" type="password" name="password" placeholder="Password" id="signin2"
							oninput="validateSignInForm()">
						<span class="focus-input100"></span>

					</div>
					<div class="text-loginmsg" id="txt_msg"></div>

					<div class="text-right p-t-13 p-b-23">
						<span class="txt1">
							Forgot
						</span>

						<a href="#" class="txt2" onclick="goFP()">
							Password?
						</a>
					</div>

					<div class="container-login100-form-btn">
						<button class="login100-form-btn" id="SignInBtn" disabled="true">
							Sign in
						</button>
					</div>

					<div class="flex-col-c p-t-170 p-b-40">
						<span class="txt1 p-b-9">
							Don't have an account?
						</span>

						<a href="#" onclick="goCreateAccouont()" class="txt3">
							Apply for one now
						</a>
					</div>
				</form>
			</div>
		</div>
	</div>




	<div class="limiter" id="table_createaccount" style="display: none;">
		<div class="container-login100">
			<div class="wrap-login100">
				<form id="form_createaccount" class="login100-form validate-form p-l-55 p-r-55 p-t-178">
					<span class="login100-form-title">
						Apply For An Account
					</span>

					<input type="hidden" name="type" value="create">
					<div class="text-findpassw">Please enter your email address and your institution. <br>
						After you submit your application for registration, we'll review your application. <br>
						If the review is approved, we will send an email containing the new password to your mailbox.
					</div>

					<div class="wrap-input100 validate-input m-b-16" data-validate="Please enter your name">
						<input class="input100" type="text" name="name" placeholder="username" id="ca1"
							oninput="validateCAForm()">
						<span class="focus-input100"></span>
					</div>

					<div class="wrap-input100 validate-input m-b-16" data-validate="Please enter e-mail">
						<input class="input100" type="text" name="email" placeholder="E-mail" id="ca2"
							oninput="validateCAForm()">
						<span class="focus-input100"></span>
					</div>

					<div class="wrap-input100 validate-input m-b-16" data-validate="Please enter your institution">
						<input class="input100" type="text" name="ins" placeholder="Your Institution" id="ca3"
							oninput="validateCAForm()">
						<span class="focus-input100"></span>
					</div>

					<div class="wrap-input100 validate-input m-b-16">
						<input class="input100" type="text" name="use" placeholder="Use(optional)" id="ca4">
						<span class="focus-input100"></span>
					</div>
					<div class="text-loginmsg" id="txt_msg3"></div>

					<div class="container-login100-form-btn">
						<button class="login100-form-btn" id="caBtn" disabled="true">
							Apply
						</button>
					</div>

					<div class="flex-col-c p-t-170 p-b-40">
						<span class="txt1 p-b-9">
							Already had an account?
						</span>

						<a href="#" onclick="goSignIn()" class="txt3">
							Sign in now
						</a>
					</div>
				</form>
			</div>
		</div>
	</div>

	<div class="limiter" id="table_forgotpassw" style="display:none;">
		<div class="container-login100">
			<div class="wrap-login100">
				<form id="form_forgotpassw" class="login100-form validate-form p-l-55 p-r-55 p-t-178">
					<span class="login100-form-title">
						Forgot Password?
					</span>

					<input type="hidden" name="type" value="find">
					<div class="text-findpassw">Please enter the email address you used when registering your account.
						We will send an email containing the new password to this email address.</div>
					<div class="wrap-input100 validate-input m-b-16" data-validate="Please enter e-mail">
						<input class="input100" type="text" name="email" placeholder="E-mail" id="fp_email"
							oninput="validateFPForm()">
						<span class="focus-input100"></span>
					</div>
					<div class="text-loginmsg" id="txt_msg2"></div>

					<div class="container-login100-form-btn">
						<button class="login100-form-btn" id="fpBtn" disabled="true">
							Find password
						</button>
					</div>

					<div class="flex-col-c p-t-170 p-b-40">
						<span class="txt1 p-b-9">
							Go back to


							<a href="#" onclick="goSignIn()" class="txt3">
								Sign in
							</a>
						</span>
					</div>
				</form>
			</div>
		</div>
	</div>
	<!--===============================================================================================-->

	<!--===============================================================================================-->
	<!--	<script src="vendor/animsition/js/animsition.min.js"></script>
===============================================================================================-->
	<!--	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
===============================================================================================-->
	<!--	<script src="vendor/select2/select2.min.js"></script>
===============================================================================================-->
	<!--	<script src="vendor/daterangepicker/moment.min.js"></script>
	<script src="vendor/daterangepicker/daterangepicker.js"></script>
===============================================================================================-->
	<!--	<script src="vendor/countdowntime/countdowntime.js"></script>	<script src="js/main.js"></script>
===============================================================================================-->
	<script>

		$(document).ready(function () {
			document.getElementById("form_signup").addEventListener("submit", function (event) {
				event.preventDefault();
				var em_sign = document.getElementById("signin1").value;
				var pw_sign = document.getElementById("signin2").value;
				$.ajax({
					url: "https://mystic-now-398307.df.r.appspot.com/login",
					method: "POST",
					xhrFields: {
						withCredentials: true
					},
					crossDomain: true,
					dataType: "json",
					data: {
						type: "signin",
						email: em_sign,
						password: pw_sign
					},
					success: function (data) {
						if (data.status == "1") {
							window.location.href = "index.html";
						}
						else {
							$("#txt_msg").text(data.msg);
						}
					},
					error: function (xhr, status, error) {
						console.log(error);
					}
				});
			});


			document.getElementById("form_createaccount").addEventListener("submit", function (event) {
				event.preventDefault();
				var name_ca = document.getElementById("ca1").value;
				var em_ca = document.getElementById("ca2").value;
				var ins = document.getElementById("ca3").value;
				var use = document.getElementById("ca4").value;
				$.ajax({
					url: "https://mystic-now-398307.df.r.appspot.com/login",
					method: "POST",
					xhrFields: {
						withCredentials: true
					},
					crossDomain: true,
					dataType: "json",
					data: {
						type: "create",
						name: name_ca,
						email: em_sign,
						ins: ins,
						use: use
					},
					success: function (data) {
						$("#txt_msg3").text(data.msg);

					},
					error: function (xhr, status, error) {
						console.log(error);
					}
				});
			});

			document.getElementById("form_forgotpassw").addEventListener("submit", function (event) {
				event.preventDefault();
				var fp_email = document.getElementById("fp_email").value;
				$.ajax({
					url: "https://mystic-now-398307.df.r.appspot.com/login",
					method: "POST",
					xhrFields: {
						withCredentials: true
					},
					crossDomain: true,
					dataType: "json",
					data: {
						type: "find",
						email: fp_email,
					},
					success: function (data) {
						$("#txt_msg2").text(data.msg);

					},
					error: function (xhr, status, error) {
						console.log(error);
					}
				});
			});



		});
	</script>

</body>

</html>